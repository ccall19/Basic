Python 内置数据结构总览
========================

快速记忆
--------
- 可变：list、dict、set、bytearray；不可变：tuple、str、bytes、frozenset、bool/int/float/complex。
- 顺序且可下标：str、bytes、bytearray、list、tuple；无序：set、frozenset、dict（3.7+保持插入顺序但仍按映射语义处理）。
- 哈希表：dict、set、frozenset；动态数组：list、bytearray；序列但不可变：tuple/str/bytes。
- 典型复杂度（均摊）：list 末尾 append/pop $O(1)$，中间插入/删除 $O(n)$；dict/set 查找/插入/删除 $O(1)$，遍历 $O(n)$；len() 始终 $O(1)$。

内置标量类型
--------------
- 数值：int（任意精度）、float（双精度）、complex（复数）、Decimal/Fraction 需额外导入，bool 继承自 int。
- 文本与二进制：str（Unicode，不可变）、bytes（不可变序列，值域 0-255）、bytearray（可变）。

序列（有序集合）
----------------
- list：动态数组，适合追加/遍历；支持切片、排序（Timsort，稳定，原地）。
- tuple：不可变序列，常用于固定结构/作为 dict key；支持拆包、命名元组（collections.namedtuple / dataclasses）。
- str/bytes/bytearray：切片返回同类型（bytearray 返回同类可变对象），encode/decode 在文本与二进制间转换。
- 常用片段：
	- 切片复制：`lst[:]`；步长为 -1 反转；`copy.copy`/`copy.deepcopy` 用于显式拷贝。
	- 排序：`sorted(iterable, key=..., reverse=...)` 返回新列表；`list.sort()` 就地修改。

集合（唯一性）
--------------
- set：可变、无序、哈希表实现；支持交并差对称差（`| & - ^`）。
- frozenset：不可变版本，可作 dict key 或其他 set 的元素。
- 注意：元素必须可哈希（实现 __hash__ 且与 __eq__ 一致）。

映射
----
- dict：键唯一，值任意；3.7+ 维护插入顺序，适合需要映射 + 保序的通用场景。
- 常用操作：`in` 查键；`get(key, default)`；`items()/keys()/values()` 视图动态反映变化；`update` 合并；`dict.setdefault` 初始化默认值；`collections.defaultdict` / `Counter` 提供更便利的计数/聚合。
- 遍历时若需同时获得索引可用 `for i, (k, v) in enumerate(d.items()):`。

栈、队列及双端队列
-------------------
- list 作为栈：`append`/`pop` 末尾 $O(1)$。
- collections.deque：双端队列，首尾 append/pop 均摊 $O(1)$；支持 `rotate`、`maxlen` 固定长度滑窗。
- queue.Queue / LifoQueue / PriorityQueue：线程安全，适用于多线程生产者-消费者；单线程更推荐 deque 或 heapq。
- heapq：最小堆列表；`heappush`/`heappop` $O(\log n)$；`nlargest`/`nsmallest` 做 Top-K。

数组与内存视图
--------------
- array.array：定类型、紧凑存储，适合大量数值；支持与 bytes 间转换。
- memoryview：零拷贝视图，可在不复制的情况下切片/修改底层缓冲区（需底层可写）。

常用选择指南
------------
- 映射查找：dict（默认）、若键固定且性能敏感可考虑 `types.MappingProxyType` 创建只读视图。
- 有序唯一集合：set；需要不可变键：frozenset；需计数：Counter。
- 顺序容器：多追加少插入用 list；两端频繁操作用 deque；需不可变/可哈希用 tuple。
- 文本处理：str；二进制流：bytes/bytearray；需零拷贝共享缓冲：memoryview。
- Top-K/优先级：heapq；固定窗口：deque(maxlen)。

常见陷阱与提示
--------------
- 可变默认参数：避免 `def f(x=[])`，改用 `None` 再初始化。
- 浅拷贝 vs 深拷贝：`copy.copy` 仅顶层，`copy.deepcopy` 递归；嵌套可变对象时注意别名问题。
- 哈希一致性：自定义对象若定义 __eq__ 应同时定义 __hash__ 或显式设为 None（不可哈希）。
- 迭代时修改容器：避免边遍历边增删；可迭代副本或收集后批量修改。
- 排序 key vs cmp：使用 key 函数，避免 cmp 风格；自定义对象可实现 `__lt__` 以支持排序。
