# 一、过期删除策略
每当我们对一个 key 设置了过期时间时，Redis 会把该 key 带上过期时间存储到一个过期字典（expires dict）中，也就是说「过期字典」保存了数据库中所有 key 的过期时间。     
Redis 使用的过期删除策略是「惰性删除+定期删除」这两种策略配和使用。

## 惰性删除
不主动删除过期键，每次从数据库访问 key 时，都检测 key 是否过期，如果过期则删除该 key。

## 定期删除策略
每隔一段时间「随机」从数据库中取出一定数量的 key 进行检查，并删除其中的过期key。        

# 二、持久化中对过期键的 处理
## RDB
- RDB 文件生成阶段：对 key 进行过期检查，过期不保存
- RDB 加载阶段：
    - Redis 是「主服务器」运行模式：过期不加载
    - Redis 是「从服务器」运行模式：无论过期否，都加载

# 三、内存淘汰机制

Redis 内存淘汰策略共有八种，这八种策略大体分为「不进行数据淘汰」和「进行数据淘汰」两类策略。

## 不进行数据淘汰的策略
noeviction（Redis3.0之后，默认的内存淘汰策略） ：它表示当运行内存超过最大设置内存时，不淘汰任何数据，而是不再提供服务，直接返回错误。

# 四、LRU 算法和 LFU 算法的区别
LRU 全称是 Least Recently Used 翻译为最近最少使用，会选择淘汰最近最少使用的数据。       
实现方式是在 Redis 的对象结构体中添加一个额外的字段，用于记录此数据的最后一次访问时间。

LFU 全称是 Least Frequently Used 翻译为最近最不常用的。